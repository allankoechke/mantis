<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mantis App: Mantis Architecture Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mantis.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mantis App<span id="projectnumber">&#160;v0.1.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Mantis Architecture Overview</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md20"></a> Mantis is a modular, pluggable Backend-as-a-Service (BaaS) framework written in C++. It is designed to be lightweight, embeddable, and flexible, targeting applications that need structured data APIs, authentication, and cloud sync — all without heavy dependencies.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md22"></a>
📐 Core Principles</h1>
<ul>
<li><b>Pluggability</b>: All major subsystems (database, auth, sync) are replaceable or extendable.</li>
<li><b>Lightweight</b>: Optimized for embedded and desktop scenarios; SQLite is the default engine.</li>
<li><b>Modularity</b>: Organized into loosely coupled components for clean embedding or CLI use.</li>
<li><b>Sync-Aware</b>: Supports client/server roles with offline-first and sync-on-demand strategies.</li>
<li><b>Developer-First</b>: Embeddable as a library or deployable as a standalone binary.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md24"></a>
🧱 High-Level Architecture</h1>
<div class="fragment"><div class="line">+-----------------------------+</div>
<div class="line">|         Client App         |</div>
<div class="line">| (Qt/CLI/Other C++ App)     |</div>
<div class="line">+-------------+--------------+</div>
<div class="line">              |</div>
<div class="line">      embeds/links to</div>
<div class="line">              ↓</div>
<div class="line">+-------------+--------------+</div>
<div class="line">|         Mantis Core        |</div>
<div class="line">| +------------------------+ |</div>
<div class="line">| |    API Router (Crow)   | |</div>
<div class="line">| |    Middleware Engine   | |</div>
<div class="line">| +------------------------+ |</div>
<div class="line">| |    Auth Provider       | |</div>
<div class="line">| |    Sync Engine         | |</div>
<div class="line">| |    Database Interface  | |</div>
<div class="line">| +------------------------+ |</div>
<div class="line">+-------------+--------------+</div>
<div class="line">              ↓</div>
<div class="line">+-----------------------------+</div>
<div class="line">|     Pluggable DB Layer      |</div>
<div class="line">|    (SQLite / MySQL / ...)   |</div>
<div class="line">+-----------------------------+</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md26"></a>
🧩 Components</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
1. &lt;strong&gt;Database Layer&lt;/strong&gt;</h2>
<ul>
<li>Abstracted via <code>IDatabase</code> interface.</li>
<li>Default: SQLite (in-process, lightweight)</li>
<li>Optional: MySQL/PostgreSQL (via plugin or dynamic linking)</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
2. &lt;strong&gt;API Router&lt;/strong&gt;</h2>
<ul>
<li>Powered by http-lib (HTTP server)</li>
<li>Auto-generates REST endpoints for tables/views</li>
<li>Supports middleware chaining (e.g., for auth, logging)</li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
3. &lt;strong&gt;Authentication Module&lt;/strong&gt;</h2>
<ul>
<li>Supports JWT</li>
<li>Tied to access control and middleware</li>
<li>Token generation and validation integrated into middleware</li>
</ul>
<h2><a class="anchor" id="autotoc_md30"></a>
4. &lt;strong&gt;Middleware System&lt;/strong&gt;</h2>
<ul>
<li>Intercepts requests before/after route handlers</li>
<li>Enables hooks for auth, logging, CORS, etc.</li>
<li>Configurable per route or globally</li>
</ul>
<h2><a class="anchor" id="autotoc_md31"></a>
5. &lt;strong&gt;Sync Engine&lt;/strong&gt;</h2>
<ul>
<li>Supports client/server sync topology</li>
<li>Uses WebSocket for real-time (future) or HTTP polling</li>
</ul>
<h2><a class="anchor" id="autotoc_md32"></a>
6. &lt;strong&gt;Static File Server&lt;/strong&gt;</h2>
<ul>
<li>Optional serving of static files (e.g., web UI or assets)</li>
<li>Configurable static root folder</li>
</ul>
<h2><a class="anchor" id="autotoc_md33"></a>
7. &lt;strong&gt;System Tables&lt;/strong&gt;</h2>
<ul>
<li><code>__tables</code> — tracks schema</li>
<li><code>__admins</code> — Admin auth and access</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md35"></a>
🔄 Sync Model</h1>
<ul>
<li>Nodes start in either <b>server</b> or <b>client</b> mode (flag at launch)</li>
<li>Client mode pulls/pushes changes to/from server</li>
<li>Conflict resolution is timestamp or revision-based (configurable)</li>
<li>Sync is incremental and tracked at row-level</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md37"></a>
⚙️ Deployment Modes</h1>
<h2><a class="anchor" id="autotoc_md38"></a>
➕ Embeddable Library</h2>
<ul>
<li>Link <code>libmantis.a</code> in your Qt/C++ project</li>
<li>Use exposed headers and initialization APIs</li>
</ul>
<h2><a class="anchor" id="autotoc_md39"></a>
🚀 Standalone Binary</h2>
<ul>
<li>Run <code>mantisapp serve</code></li>
<li>Works with Docker, systemd, or embedded startup</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md41"></a>
📁 File Structure Overview</h1>
<div class="fragment"><div class="line">mantis/</div>
<div class="line">├── include/mantis/      # Public API headers</div>
<div class="line">├── src/                 # Internal implementation</div>
<div class="line">├── docker/              # Dockerfile &amp; entrypoint</div>
<div class="line">├── examples/            # Example apps embedding Mantis</div>
<div class="line">├── tests/               # Test suite</div>
<div class="line">└── CMakeLists.txt</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md43"></a>
📌 Extensibility Ideas</h1>
<ul>
<li>Live schema migration tool (CLI command)</li>
<li>Admin dashboard (served from static folder or separate frontend)</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md45"></a>
🏁 Conclusion</h1>
<p>Mantis provides a solid, portable foundation for applications that need backend features without the weight of traditional stacks. Whether embedded in a GUI tool or deployed as a syncable API server, Mantis offers structure, simplicity, and extensibility in a small, powerful package. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
